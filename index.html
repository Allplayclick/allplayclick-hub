<!doctype html>
<html lang="hi">
<head<link rel="icon" type="image/png" href="iconpng.png">
<link rel="shortcut icon" href="iconpng.png">
<link rel="icon" type="image/png" sizes="32x32" href="iconpng.png">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Allplayclick — App Download</title>
<meta name="description" content="Allplayclick - Personal app download page (APK / AAB)" />
<style>
  :root{
    --bg:#f4f7fb; --card:#fff; --muted:#6b7280; --text:#0f1720; --accent:#0b84ff;
    --accent2:#06b58a; --radius:12px;
  }
  [data-theme="dark"]{
    --bg:#071025; --card:#071827; --muted:#9aa6bb; --text:#e6eef8; --accent:#4ea8ff; --accent2:#2bd59e;
  }
  *{box-sizing:border-box}
  body{ margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased;}
  .wrap{ max-width:980px;margin:28px auto;padding:18px; }
  .card{ background:var(--card); padding:18px;border-radius:var(--radius); box-shadow:0 8px 28px rgba(2,6,23,0.06);}
  header{ display:flex;align-items:center;gap:14px; }
  .logo{ width:58px;height:58px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#63d2ff);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:18px}
  h1{ margin:0;font-size:20px }
  .lead{ margin:6px 0 12px;color:var(--muted) }
  .grid{ display:flex;gap:18px;flex-wrap:wrap;margin-top:14px }
  .left{ flex:1; min-width:260px }
  .right{ width:300px; min-width:220px }
  .actions{ display:flex;gap:10px;flex-wrap:wrap }
  .btn{ padding:12px 14px;border-radius:10px;text-decoration:none;color:#fff;font-weight:600;display:inline-block; }
  .btn.apk{ background:var(--accent) }
  .btn.aab{ background:var(--accent2) }
  .btn.ghost{ background:transparent;color:var(--muted);border:1px solid rgba(0,0,0,0.06);padding:10px 12px }
  .meta{ margin-top:12px; display:grid; gap:8px }
  .meta .row{ background:rgba(0,0,0,0.03);padding:10px;border-radius:8px;color:var(--muted) }
  .note{ background:#fffbe6;padding:10px;border-radius:8px;margin-top:12px;color:#6b4b00 }
  .qr{ display:flex;gap:14px;align-items:center;margin-top:16px }
  .qr img{ width:120px;height:120px; border-radius:8px;border:1px solid rgba(0,0,0,0.06) }
  .links a{ display:block;padding:8px;text-decoration:none;color:var(--accent);margin-bottom:8px;border-radius:8px }
  .small{ font-size:13px;color:var(--muted) }
  .topright{ margin-left:auto; display:flex; gap:8px; align-items:center }
  .theme-toggle{ background:transparent;border:1px solid rgba(0,0,0,0.06);padding:8px;border-radius:8px; cursor:pointer; color:var(--muted) }
  .share-row{ display:flex;gap:8px;margin-top:10px;flex-wrap:wrap }
  footer{ margin-top:18px;color:var(--muted);text-align:center;font-size:13px }
  @media(max-width:720px){ .grid{ flex-direction:column } .right{ width:100% } }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <header>
      <div class="logo">AP</div>
      <div style="min-width:0;">
        <h1>Allplayclick App</h1>
        <div class="lead">Personal app download page — APK और AAB दोनों उपलब्ध</div>
      </div>
      <div class="topright">
        <button id="themeBtn" class="theme-toggle" aria-label="Toggle theme">Theme</button>
      </div>
    </header>

    <div class="grid">
      <div class="left">
        <div class="actions" role="group" aria-label="Download actions">
          <a id="downloadAab" class="btn aab" href="#" title="Download AAB">Download .AAB</a>
          <a id="downloadApk" class="btn apk" href="#" title="Download APK">Download .APK</a>
          <a id="rawBtn" class="btn ghost" href="#" target="_blank" title="Open repository">Open on GitHub</a>
        </div>

        <div class="meta" aria-hidden>
          <div class="row"><strong>File:</strong> <span id="fileName">app-release</span></div>
          <div class="row"><strong>Version:</strong> <span id="version">1.0</span> · <strong>Size:</strong> <span id="filesize">–</span></div>
          <div class="row"><strong>Updated:</strong> Recently</div>
        </div>

        <div class="note"><strong>Note:</strong> `.aab` Play Store के लिए; फोन में install करने के लिए `.apk` download करें।</div>

        <div class="qr" aria-hidden>
          <img id="qrImg" alt="QR code" />
          <div style="flex:1">
            <div style="font-weight:700">Scan to open</div>
            <div class="small" style="margin-top:6px">Downloads: <span id="dlCounter">0</span></div>
            <div class="share-row">
              <button id="shareBtn" class="btn ghost" style="background:#f1f5f9;color:var(--text);border:1px solid rgba(0,0,0,0.06)">Share</button>
              <button id="copyBtn" class="btn ghost" style="background:#f1f5f9;color:var(--text);border:1px solid rgba(0,0,0,0.06)">Copy Link</button>
            </div>
          </div>
        </div>
      </div>

      <aside class="right">
        <div style="font-weight:700;margin-bottom:8px">Quick Links</div>
        <div class="links">
          <a id="linkRawAab" href="#" target="_blank">Raw AAB</a>
          <a id="linkRawApk" href="#" target="_blank">Raw APK</a>
          <a id="linkPage" href="#" target="_blank">Open Page</a>
        </div>

        <div style="margin-top:12px">
          <div style="font-weight:700;margin-bottom:8px">More</div>
          <div class="links">
            <a href="#" onclick="alert('App 1')">App 1</a>
            <a href="#" onclick="alert('App 2')">App 2</a>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <footer>Allplayclick • Built with ❤️</footer>
</div>

<script>
/* ========== CONFIG ========== */
/* Replace these if your branch/name is different */
const RAW_AAB = "https://raw.githubusercontent.com/Allplayclick/allplayclick-hub/main/app-release.aab";
const RAW_APK = "https://raw.githubusercontent.com/Allplayclick/allplayclick-hub/main/app-release.apk";
const REPO_URL = "https://github.com/Allplayclick/allplayclick-hub";
const PAGE_URL = "https://allplayclick.github.io/allplayclick-hub/"; // your pages url

/* ========== UI wiring ========== */
document.getElementById('downloadAab').href = RAW_AAB;
document.getElementById('downloadApk').href = RAW_APK;
document.getElementById('rawBtn').href = REPO_URL;
document.getElementById('linkRawAab').href = RAW_AAB;
document.getElementById('linkRawApk').href = RAW_APK;
document.getElementById('linkPage').href = PAGE_URL;

/* QR */
document.getElementById('qrImg').src = "https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=" + encodeURIComponent(PAGE_URL);

/* DOWNLOAD COUNTER (localStorage) */
const COUNTER_KEY = "ap_dl_cnt_v2";
function getCount(){ return parseInt(localStorage.getItem(COUNTER_KEY) || "0",10); }
function setCount(n){ localStorage.setItem(COUNTER_KEY, String(n)); document.getElementById('dlCounter').innerText = n; }
setCount(getCount());

/* START DOWNLOAD (increment + open) */
function startDownload(url){
  const c = getCount() + 1; setCount(c);
  // try to open in new window so user can save/be prompted
  window.open(url, "_blank");
}

/* Attach click handlers */
document.getElementById('downloadAab').addEventListener('click', function(e){
  e.preventDefault(); startDownload(RAW_AAB);
});
document.getElementById('downloadApk').addEventListener('click', function(e){
  e.preventDefault(); startDownload(RAW_APK);
});

/* Theme handling */
const THEME_KEY = "ap_theme_v2";
function setTheme(t){ document.documentElement.setAttribute('data-theme', t); localStorage.setItem(THEME_KEY, t); }
document.getElementById('themeBtn').addEventListener('click', ()=>{
  const cur = localStorage.getItem(THEME_KEY) || 'light';
  setTheme(cur === 'light' ? 'dark' : 'light');
});
setTheme(localStorage.getItem(THEME_KEY) || 'light');

/* Share & Copy */
document.getElementById('copyBtn').addEventListener('click', async ()=>{
  try{
    await navigator.clipboard.writeText(PAGE_URL);
    alert("Link copied to clipboard.");
  }catch(e){ alert("Copy failed. URL: " + PAGE_URL); }
});
document.getElementById('shareBtn').addEventListener('click', async ()=>{
  if(navigator.share){
    try{ await navigator.share({ title: document.title, text: 'Download app', url: PAGE_URL }); }
    catch(e){ console.log("Share cancelled or failed", e); }
  } else {
    alert("Share not supported on this browser. You can copy link.");
  }
});

/* Attempt to fetch HEAD for file size (best-effort). If CORS blocked, ignore gracefully */
const filesizeEl = document.getElementById('filesize');
async function tryFetchSize(url, el){
  try{
    const res = await fetch(url, { method: 'HEAD' });
    if(res.ok){
      const len = res.headers.get('content-length');
      if(len){
        const kb = Math.round((parseInt(len,10) / 1024));
        el.innerText = kb + " KB";
        return;
      }
    }
    el.innerText = "—";
  }catch(e){
    // Some servers block HEAD due to CORS; fallback to GET attempt short (not ideal).
    console.log("HEAD fetch failed", e);
    el.innerText = "—";
  }
}
tryFetchSize(RAW_APK, filesizeEl); // show apk size (fallback if fails)

/* small UX: show filename */
document.getElementById('fileName').innerText = "app-release";

/* Debug info in console */
console.log({ RAW_AAB, RAW_APK, REPO_URL, PAGE_URL });

</script>
</body>
</html>
